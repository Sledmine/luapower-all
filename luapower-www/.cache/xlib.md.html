<h2 id="local-xlib-requirexlib"><code>local xlib = require'xlib'</code></h2>
<p>Binding of libX11 library and higher-level cruft-hiding API. Created mainly for <a href="/nw">nw</a>’s <a href="https://github.com/luapower/nw/blob/master/nw_xlib.lua">xlib backend</a>, but directly usable for X11-only apps.</p>
<h2 id="api">API</h2>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>connection</strong></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib_module.connect([displayname]) -&gt; xlib</code></td>
<td>connect and get a xlib API for that connection</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.flush()</code></td>
<td>flush the command queue</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.screen</code></td>
<td>default screen</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>server</strong></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.extension_map() -&gt; {name = true}</code></td>
<td>get available X extensions</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.extension(name) -&gt; true|false</code></td>
<td>check if an extension is available</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>events</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.poll([block]) -&gt; event | nil</code></td>
<td>poll (or wait) for the next event</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.peek() -&gt; event | nil</code></td>
<td>get the next event without pulling it</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>atoms</strong></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.atom(name) -&gt; atom</code></td>
<td>intern an atom</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.atom_name(atom) -&gt; s | nil</code></td>
<td>get an atom’s name</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>screens</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.screens() -&gt; iter() -&gt; screen_num, screen</code></td>
<td>iterate screens</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>constructors and destructors</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.create_window(...)</code></td>
<td>XCreateWindow wrapper</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.destroy_window(win)</code></td>
<td>XDestroyWindow wrapper</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.create_colormap(...)</code></td>
<td>XCreateColormap wrapper</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>window properties</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.list_props(win) -&gt; {name1, ...}</code></td>
<td>list properties</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.delete_prop(win, prop)</code></td>
<td>delete a property</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_string_prop(win, prop) -&gt; s</code></td>
<td>get a string-type property</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_string_prop(win, prop, s)</code></td>
<td>set a string-type property</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_atom_map_prop(win, prop) -&gt; t</code></td>
<td>get an atom map-type property</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_atom_map_prop(win, prop, t)</code></td>
<td>set an atom map-type property</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.set_atom_prop(win, prop, val)</code></td>
<td>set an atom-type property</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_cardinal_prop(win, prop, n)</code></td>
<td>set an integer-type property</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_window_prop(win, prop) -&gt; win</code></td>
<td>get a window-type property</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_window_prop(win, prop, target_win)</code></td>
<td>set a window-type property</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_window_list_prop(win, prop) -&gt; t</code></td>
<td>get a window list-type property</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>client message events</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>client_message_event(win, type, fmt) -&gt; e</code></td>
<td>create a client message event</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>int32_list_event(win, type, n1, ...) -&gt; e</code></td>
<td>create an integer list event</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>atom_list_event(win, type, atom1, ...) -&gt; e</code></td>
<td>create an atom list event</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>send_client_message_to_root(e)</code></td>
<td>send a client message to screen.root</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>window management</strong></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.get_geometry(win) -&gt; geom</code></td>
<td>get window geometry as xlib_get_geometry_reply_t</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.net_supported(feature) -&gt; true|false</code></td>
<td>check the _NET_SUPPORTED atom map</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.get_netwn_states(win) -&gt; t</code></td>
<td>get _NET_WM_STATE atom map</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.set_netwn_states(win, t)</code></td>
<td>set _NET_WM_STATE atom map</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.change_netwm_states(win,?,p1[,p2])</code></td>
<td>set or reset one or two _NET_WM_STATE atoms</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_wm_hints(win) -&gt; hints</code></td>
<td>get WM_HINTS as xlib_icccm_wm_hints_t</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_wm_hints(win, hints)</code></td>
<td>set WM_HINTS as xlib_icccm_wm_hints_t</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_wm_normal_hints(win) -&gt; hints</code></td>
<td>get WM_NORMAL_HINTS as xlib_icccm_wm_size_hints_t</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_wm_normal_hints(win, hints)</code></td>
<td>set WM_NORMAL_HINTS as xlib_icccm_wm_size_hints_t</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.set_minmax(win,minw,minh,maxw,maxh)</code></td>
<td>set min/max part of WM_NORMAL_HINTS</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.get_motif_wm_hints(win) -&gt; hints</code></td>
<td>get _MOTIF_WM_HINTS as xlib_motif_wm_hints_t</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.set_motif_wm_hints(win, hints)</code></td>
<td>set _MOTIF_WM_HINTS as xlib_motif_wm_hints_t</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.request_frame_extents(win)</code></td>
<td>send _NET_REQUEST_FRAME_EXTENTS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.frame_extents(win) -&gt; x, y, w, h</code></td>
<td>send _NET_FRAME_EXTENTS</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.map(win)</code></td>
<td>show window</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.unmap(win)</code></td>
<td>hide window</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.activate(win)</code></td>
<td>activate window</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.minimize(win)</code></td>
<td>minimize window</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.translate_coords(src_win,dst_win,x,y)-&gt;x,y</code></td>
<td>translate coordinates between windows</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.change_pos(win, x, y)</code></td>
<td>change window position relative to its parent</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.change_size(win, cw, ch)</code></td>
<td>change window client area size</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.get_title(win) -&gt; title</code></td>
<td>get window title</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_title(win, title)</code></td>
<td>set window title and icon name</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.query_tree(win) -&gt; win_tree</code></td>
<td>get window root, parent and children</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>shm</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.shm() -&gt; shm_C</code></td>
<td>get C namespace of xlib-shm if server supports shm</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>ping protocol</strong></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.pong(e)</code></td>
<td>respond to a _NET_WM_PING event</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.set_netwm_ping_info(win)</code></td>
<td>set _NET_WM_PID and WM_CLIENT_MACHINE</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>direct access</strong></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.c</code></td>
<td>xlib_connection_t</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>xlib.C</code></td>
<td>xlib C namespace</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>xlib.check(cookie)</code></td>
<td>check a request cookie for errors</td>
</tr>
</tbody>
</table>
